<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedData | Secure Enterprise Access</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <!-- Removed FA to fix mobile tracking blocking issues -->
    <style>
        :root { --primary: #3b82f6; --bg: #020617; --glass: rgba(15, 23, 42, 0.6); --border: rgba(255,255,255,0.1); }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Outfit', sans-serif; background: var(--bg); color: white; overflow-x: hidden; }
        
        /* Modern Scrollbar Handling (Hidden but functional) */
        ::-webkit-scrollbar { width: 0px; background: transparent; }
        html { -ms-overflow-style: none; scrollbar-width: none; }

        /* Modal Overlay for Policies */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(10px);
            z-index: 3000; opacity: 0; pointer-events: none; transition: 0.3s;
            display: flex; align-items: center; justify-content: center;
        }
        .modal-overlay.open { opacity: 1; pointer-events: all; }


        /* HERO SECTION (Original Split Layout) */
        .hero-section {
            display: flex; min-height: 100vh; position: relative; width: 100%; max-width: 100vw;
            flex-direction: row-reverse; /* Login Right, Banner Left */
        }

        /* --- LEFT: LOGIN SECTION --- */
        .login-section {
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;
            position: relative; padding: 100px 20px 20px 20px; z-index: 10;
        }
        .bg-mesh {
            position: absolute; width: 100%; height: 100%; top:0; left:0; z-index:-1;
            background: radial-gradient(circle at 20% 50%, rgba(59,130,246,0.1), transparent 40%),
                        radial-gradient(circle at 80% 80%, rgba(139,92,246,0.1), transparent 40%);
        }
        .login-card {
            width: 100%; max-width: 400px; padding: 40px;
            background: rgba(15, 23, 42, 0.6); border: 1px solid var(--border);
            border-radius: 24px; backdrop-filter: blur(12px);
            text-align: center; animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }

        /* --- RIGHT: BANNER SECTION --- */
        .banner-section {
            flex: 0 0 500px; background: #0f172a; border-right: 1px solid var(--border); /* Changed from Left */
            display: flex; align-items: center; justify-content: center; position: relative;
            z-index: 50;
        }
        .tech-card {
            width: 85%; max-width: 400px; background: linear-gradient(145deg, #1e293b, #0f172a);
            border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 20px; padding: 30px;
            position: relative; overflow: hidden;
        }
        .tech-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, var(--primary), #8b5cf6, var(--primary));
            background-size: 200% 100%; animation: gradientMove 3s linear infinite;
        }
        @keyframes gradientMove { 0%{background-position:100% 0} 100%{background-position:-100% 0} }

        /* Inputs & Buttons */
        .input-group { text-align: left; margin-bottom: 20px; }
        .input-group label { display: block; color: #94a3b8; font-size: 0.75rem; font-weight: 700; margin-bottom: 8px; }
        .input-box { width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--border); padding: 12px 16px; border-radius: 12px; color: white; }
        .btn-primary { width: 100%; padding: 12px; border:none; border-radius: 12px; font-weight: 600; cursor: pointer; background: linear-gradient(135deg, var(--primary), #2563eb); color: white; display:flex; justify-content:center; align-items:center; gap:8px; }

        /* CONTENT SECTIONS */
        .content-container { max-width: 1200px; margin: 0 auto; padding: 80px 20px; }
        .section-title { text-align: center; font-size: 2.2rem; margin-bottom: 60px; font-weight: 700; background: linear-gradient(to right, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* About Grid */
        .about-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; }
        .about-img { width: 100%; border-radius: 20px; overflow: hidden; border: 1px solid var(--border); box-shadow: 0 20px 40px rgba(0,0,0,0.3); }
        .about-img img { width: 100%; height: auto; display: block; }
        .stat-box { display: flex; gap: 40px; margin-top: 30px; }
        .stat-item h3 { font-size: 2rem; color: var(--primary); margin: 0; }
        .stat-item p { color: #94a3b8; margin: 5px 0 0; font-size: 0.9rem; }

        /* Reviews Grid */
        .reviews-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .review-card { background: rgba(30, 41, 59, 0.4); border: 1px solid var(--border); padding: 30px; border-radius: 16px; transition: 0.3s; }
        .review-card:hover { transform: translateY(-5px); background: rgba(30, 41, 59, 0.6); }
        .stars { color: #fbbf24; margin-bottom: 15px; }

        /* FAQ Accordion */
        .faq-item { border-bottom: 1px solid var(--border); margin-bottom: 15px; }
        .faq-btn { width: 100%; padding: 20px; text-align: left; background: none; border: none; color: white; font-size: 1.1rem; cursor: pointer; display: flex; justify-content: space-between; font-weight: 600; }
        .faq-content { max-height: 0; overflow: hidden; transition: 0.3s; color: #94a3b8; padding: 0 20px; line-height: 1.6; }
        .faq-item.active .faq-content { max-height: 200px; padding-bottom: 20px; }
        .faq-icon { transition: 0.3s; }
        .faq-item.active .faq-icon { transform: rotate(180deg); }

        /* Footer */
        footer { border-top: 1px solid var(--border); padding: 60px 20px; text-align: center; margin-top: 80px; background: #0f172a; }
        .footer-links { display: flex; justify-content: center; gap: 30px; margin-bottom: 30px; flex-wrap: wrap; }
        .footer-links a { color: #94a3b8; text-decoration: none; transition: 0.2s; }
        .footer-links a:hover { color: white; }

        /* Global Header */
        .global-header { position: absolute; top: 0; left: 0; width: 100%; padding: 20px 30px; z-index: 500; display: flex; align-items: center; gap: 15px; }
        .logo-icon { width:40px; height:40px; background:linear-gradient(135deg,var(--primary),#8b5cf6); border-radius:10px; }
        .brand-text { font-weight: 700; font-size: 1.5rem; letter-spacing: 1px; }

        /* Mobile Logic */
        .mobile-close-btn { display: none; }
        .reopen-link { display: none; }
        
        @media (max-width: 1000px) {
            .hero-section { flex-direction: column; min-height: auto; }
            .split-layout { display: block; }
            
            .banner-section { 
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                border-right: none; /* Reset border */ 
                background: rgba(2, 6, 23, 0.9); backdrop-filter: blur(10px);
                z-index: 100; padding: 20px;
                /* Hidden by default */
                transform: translateY(100%); transition: transform 0.4s;
            }
            .banner-section.open { transform: translateY(0); }
            
            .login-section { min-height: 100vh; padding-top: 80px; }
            .about-grid { grid-template-columns: 1fr; }
            .reopen-link { display: block; }
            
            .mobile-close-btn { 
                display: block; width: 32px; height: 32px; 
                background: rgba(255,255,255,0.1); border:none; border-radius:50%; color:#fff; cursor:pointer;
                /* Positioned relative to tech-card header */
            }
        }
    </style>
</head>
<body>

    <header class="global-header">
        <div class="logo-icon"></div>
        <span class="brand-text">MED DATA</span>
    </header>

    <div class="hero-section">
        <!-- LOGIN -->
        <div class="login-section">
            <div class="bg-mesh"></div>
            <div class="login-card">
                <h1 style="margin-top:0; color:var(--primary);">MED DATA</h1>
                <p class="subtitle">Secure Login</p>
                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="input-group"><label>ACCESS ID</label><input class="input-box" id="username" required placeholder="User ID"></div>
                    <div class="input-group"><label>PASSWORD</label><input type="password" class="input-box" id="password" required placeholder="Secure Key"></div>
                    <button type="submit" class="btn-primary">AUTHENTICATE ACCOUNT</button>
                </form>
                <p class="subtitle reopen-link" style="margin-top:20px; cursor:pointer; text-decoration:underline; color:var(--primary);" onclick="openBanner()">Join the Team &rarr;</p>
            </div>
            
            <div id="sysContact" style="margin-top:30px; text-align:center; color:rgba(148, 163, 184, 0.6); font-size:0.85rem; line-height:1.6;">Connecting...</div>
        </div>

        <!-- BANNER (Mobile Overlay / Desktop Right) -->
        <div class="banner-section" id="bannerPanel">
            <div class="tech-card">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                    <span style="font-family:'Share Tech Mono'; color:var(--primary);">// CAREERS</span>
                    <button class="mobile-close-btn" onclick="closeBanner()">√ó</button>
                </div>
                <h2>Join Our Network</h2>
                <p style="color:#94a3b8; font-size:0.9rem; margin-bottom:20px;">Submit your profile for review.</p>
                <div class="input-group"><input class="input-box" id="cName" placeholder="Full Name"></div>
                <div class="input-group"><input class="input-box" id="cMobile" placeholder="Contact (+91)"></div>
                <div class="input-group"><input class="input-box" id="cEmail" placeholder="Email (Optional)"></div>
                <button class="btn-primary" onclick="submitApplication()">SUBMIT PROFILE</button>
            </div>
        </div>
    </div>

    <!-- CONTENT SECTIONS -->
    <div class="content-container">
        <!-- ABOUT -->
        <section class="about-grid">
            <div class="about-text">
                <div style="color:var(--primary); font-weight:600; margin-bottom:10px; letter-spacing:1px;">ENTERPRISE INFRASTRUCTURE</div>
                <h2 style="font-size:2.8rem; margin:0 0 20px 0; line-height:1.1;">The World's Most Trusted<br>Medical Data Gateway.</h2>
                <p style="color:#94a3b8; line-height:1.7; font-size:1.1rem;">
                    MedData Systems provides mission-critical data processing infrastructure for <strong>Fortune 500</strong> healthcare providers. We leverage quantum-resistant encryption and AI-driven compliance engines to ensure rigorous adherence to global standards.
                </p>
                <div class="stat-box">
                    <div class="stat-item"><h3>50TB+</h3><p>Daily Throughput</p></div>
                    <div class="stat-item"><h3>99.99%</h3><p>Uptime SLA</p></div>
                    <div class="stat-item"><h3>ISO</h3><p>27001 Certified</p></div>
                </div>
            </div>
            <div class="about-img">
                <img src="/static/images/about_hero.png" alt="Our Team">
            </div>
        </section>

        <!-- REVIEWS -->
        <div style="margin-top:100px;">
            <h2 class="section-title">User Reviews</h2>
            <div class="reviews-grid">
                <div class="review-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p style="color:#cbd5e1;">"The most secure and easy-to-use platform for record management. Has revolutionized our workflow."</p>
                    <div style="margin-top:20px; font-weight:600;">Dr. Emily Chen</div>
                    <div style="font-size:0.8rem; color:#64748b;">Chief of Surgery</div>
                </div>
                <div class="review-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p style="color:#cbd5e1;">"Incredible support team and rock-solid uptime. Cannot imagine daily ops without it."</p>
                    <div style="margin-top:20px; font-weight:600;">Mark Volkov</div>
                    <div style="font-size:0.8rem; color:#64748b;">Data Administrator</div>
                </div>
                <div class="review-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p style="color:#cbd5e1;">"Seamless integration with our existing systems. The data integrity checks are a lifesaver."</p>
                    <div style="margin-top:20px; font-weight:600;">Sarah Johnson</div>
                    <div style="font-size:0.8rem; color:#64748b;">Clinical Lead</div>
                </div>
            </div>
        </div>

        <!-- FAQ -->
        <div style="margin-top:100px; max-width:800px; margin-left:auto; margin-right:auto;">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <div class="faq-item">
                <button class="faq-btn" onclick="toggleFaq(this)">How secure is the data? <span class="faq-icon">‚ñº</span></button>
                <div class="faq-content">We use AES-256 encryption for all data at rest and TLS 1.3 for data in transit. We are fully HIPAA and GDPR compliant.</div>
            </div>
            <div class="faq-item">
                <button class="faq-btn" onclick="toggleFaq(this)">How do I apply for a position? <span class="faq-icon">‚ñº</span></button>
                <div class="faq-content">Simply use the "Join Our Network" form on this page (top right on desktop, or click "Join the Team" on mobile).</div>
            </div>
            <div class="faq-item">
                <button class="faq-btn" onclick="toggleFaq(this)">What if I forget my access ID? <span class="faq-icon">‚ñº</span></button>
                <div class="faq-content">Contact your administrator immediately. Security protocols prevent self-service recovery for high-level accounts.</div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="footer-links">
            <a href="#" onclick="openPolicy('privacy'); return false;">Privacy Policy</a>
            <a href="#" onclick="openPolicy('terms'); return false;">Terms of Service</a>
            <a href="#" onclick="openPolicy('security'); return false;">Security Audit</a>
            <a href="mailto:support@meddata.inc">Contact Support</a>
        </div>
        <div style="color:#475569; font-size:0.8rem;">&copy; 2026 Med Data Systems Inc. All Rights Reserved.</div>
    </footer>

    <!-- POLICY MODAL -->
    <!-- POLICY MODAL -->
    <div id="policyModal" class="modal-overlay">
        <div class="tech-card" style="max-width:800px; width:90%; height:80vh; overflow-y:auto; background:#0f172a; border-color:#fff;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; position:sticky; top:0; background:#0f172a; padding-bottom:10px; border-bottom:1px solid #333; z-index:10;">
                <h2 id="policyTitle" style="margin:0; font-family:'Share Tech Mono'; color:var(--primary);">POLICY</h2>
                <button onclick="closePolicy()" style="background:none; border:none; color:white; font-size:2rem; cursor:pointer;">&times;</button>
            </div>
            <div id="policyContent" style="color:#cbd5e1; line-height:1.8; text-align:left;">
                
            </div>
        </div>
    </div>

    <div id="toast" style="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#333;padding:12px 24px;border-radius:30px;opacity:0;transition:0.3s;pointer-events:none;">Msg</div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch('/api/system/config').then(r=>r.json()).then(d=>{
                document.querySelector('.brand-text').innerText = d.brand_name.toUpperCase();
                document.getElementById('sysContact').innerHTML = `<div style="font-weight:600; color:#94a3b8; margin-bottom:5px;">OFFICIAL CONTACT</div><div>üìç ${d.address}</div><div>üìû ${d.support_contact}</div>`;
            }).catch(e=>console.log(e));
        });

        // Mobile Banner Logic
        function openBanner() { document.getElementById('bannerPanel').classList.add('open'); }
        function closeBanner() { document.getElementById('bannerPanel').classList.remove('open'); }
        
        // Policy Logic
        const policies = {
            privacy: `<strong>1. Data Collection</strong><br>We collect only essential data required for system access and security auditing. This includes IP addresses, login timestamps, and device identifiers.<br><br><strong>2. Encryption</strong><br>All PII (Personally Identifiable Information) is encrypted at rest using AES-256.<br><br><strong>3. Third Parties</strong><br>We do not share data with external advertisers.`,
            terms: `<strong>1. Authorization</strong><br>Access to this system is restricted to authorized personnel only. Unauthorized access is a violation of the CFAA.<br><br><strong>2. Usage</strong><br>All actions are logged. Misuse of data will result in immediate termination and legal action.<br><br><strong>3. Liability</strong><br>MedData Inc. provides this platform "as is" and accepts no liability for interruptions caused by force majeure.`,
            security: `<strong>Current Status: SECURE</strong><br>Last Audit: Jan 2026.<br>Penetration Testing: PASSED.<br>Compliance: HIPAA, GDPR, SOC2 Type II.`
        };

        function openPolicy(type) {
            document.getElementById('policyTitle').innerText = type === 'privacy' ? 'PRIVACY POLICY' : type === 'terms' ? 'TERMS OF SERVICE' : 'SECURITY REPORT';
            document.getElementById('policyContent').innerHTML = policies[type];
            document.getElementById('policyModal').classList.add('open');
        }
        function closePolicy() {
            document.getElementById('policyModal').classList.remove('open');
        }

        function toggleFaq(btn) {
            btn.parentElement.classList.toggle('active');
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg; t.style.opacity = '1';
            setTimeout(()=>t.style.opacity='0', 3000);
        }

        async function handleLogin(e) {
            e.preventDefault();
            const btn = document.querySelector('#loginForm button');
            const original = btn.innerText;
            btn.innerText = "VERIFYING..."; btn.disabled = true;

            const u = document.getElementById('username').value;
            const p = document.getElementById('password').value;

            try {
                const res = await fetch('/auth/login', {
                    method:'POST', headers:{'Content-Type':'application/json'},
                    body:JSON.stringify({username:u, password:p})
                });
                const data = await res.json();
                if(res.ok) {
                    // Legacy Admin Dashboard Keys
                    localStorage.setItem('token', data.access_token);
                    localStorage.setItem('user_id', data.user_id);
                    localStorage.setItem('role', data.role);

                    // Employee Portal Keys (Required for fetchSecure)
                    localStorage.setItem('access_token', data.access_token);
                    localStorage.setItem('user', JSON.stringify({
                        id: data.user_id,
                        username: data.username,
                        role: data.role
                    }));

                    window.location.href = data.role === 'ADMIN' ? '/admin/dashboard' : '/employee/home';
                } else {
                    showToast(data.detail || "Login Failed");
                }
            } catch(err) { showToast("Connection Error"); }
            btn.innerText = original; btn.disabled = false;
        }

        async function submitApplication() {
            const name = document.getElementById('cName').value;
            const mobile = document.getElementById('cMobile').value;
            const btn = document.querySelector('#bannerPanel .btn-primary');
            
            if(!name || !mobile) return showToast("Name and Mobile required");
            
            const original = btn.innerText;
            btn.innerText = "SENDING..."; btn.disabled = true;

            try {
                const res = await fetch('/api/public/contact', {
                    method:'POST', headers:{'Content-Type':'application/json'},
                    body:JSON.stringify({
                        name, mobile,
                        email: document.getElementById('cEmail').value,
                        message: "Application via Landing Page"
                    })
                });
                if(res.ok) {
                    showToast("Application Submitted!");
                    closeBanner();
                    document.getElementById('cName').value = "";
                    document.getElementById('cMobile').value = "";
                    document.getElementById('cEmail').value = "";
                } else {
                    showToast("Submission Failed");
                }
            } catch(e) { showToast("Error Sending"); }
            btn.innerText = original; btn.disabled = false;
        }
    </script>
</body>
</html>